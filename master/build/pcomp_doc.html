
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PCOMP - Position Compare &#8212; PandABlocks-FPGA 0.1.dev2605+g5a850c3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=a393a160"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'build/pcomp_doc';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.2';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://PandABlocks.github.io/PandABlocks-FPGA/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'master';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/PandA-logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/PandA-logo-for-black-background.svg" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../_static/PandA-logo-for-black-background.svg" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">PandABlocks-FPGA</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../how-to.html">
                        How-to Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../explanations.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference.html">
                        Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PandABlocks/PandABlocks-FPGA" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/PandABlocks-FPGA" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../how-to.html">
                        How-to Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../explanations.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference.html">
                        Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PandABlocks/PandABlocks-FPGA" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/PandABlocks-FPGA" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">PCOMP -...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="pcomp-position-compare">
<h1>PCOMP - Position Compare<a class="headerlink" href="#pcomp-position-compare" title="Link to this heading">#</a></h1>
<p>The position compare block takes a position input and allows a regular number
of threshold comparisons to take place on a position input. The normal order
of operations is something like this:</p>
<ul class="simple">
<li><p>If PRE_START &gt; 0 then wait until position has passed START - PRE_START</p></li>
<li><p>If START &gt; 0 then wait until position has passed START and set OUT=1</p></li>
<li><p>Wait until position has passed START + WIDTH and set OUT=0</p></li>
<li><p>Wait until position has passed START + STEP and set OUT=1</p></li>
<li><p>Wait until position has passed START + STEP + WIDTH and set OUT=0</p></li>
<li><p>Continue until PULSES have been produced</p></li>
</ul>
<p>It can be used to generate a position based pulse train against an input encoder
or analogue system, or to work as repeating comparator.</p>
<section id="fields">
<h2>Fields<a class="headerlink" href="#fields" title="Link to this heading">#</a></h2>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ENABLE</p></td>
<td><p>bit_mux</p></td>
<td><p>Stop on falling edge, reset and enable on rising edge</p></td>
</tr>
<tr class="row-odd"><td><p>INP</p></td>
<td><p>pos_mux</p></td>
<td><p>Position data from position-data bus</p></td>
</tr>
<tr class="row-even"><td><p>PRE_START</p></td>
<td><p>param int</p></td>
<td><p>INP must be this far from START before waiting for START</p></td>
</tr>
<tr class="row-odd"><td><p>START</p></td>
<td><p>param int</p></td>
<td><p>Pulse absolute/relative start position value</p></td>
</tr>
<tr class="row-even"><td><p>WIDTH</p></td>
<td><p>param int</p></td>
<td><p>The relative distance between a rising and falling edge</p></td>
</tr>
<tr class="row-odd"><td><p>STEP</p></td>
<td><p>param int</p></td>
<td><p>The relative distance between successive rising edges</p></td>
</tr>
<tr class="row-even"><td><p>PULSES</p></td>
<td><p>param</p></td>
<td><p>The number of pulses to produce, 0 means infinite</p></td>
</tr>
<tr class="row-odd"><td><p>RELATIVE</p></td>
<td><p>param enum</p></td>
<td><p><div class="line-block">
<div class="line">If 1 then START is relative to the position of INP at enable</div>
<div class="line">0   Absolute</div>
<div class="line">1   Relative</div>
</div>
</p></td>
</tr>
<tr class="row-even"><td><p>DIR</p></td>
<td><p>param enum</p></td>
<td><p><div class="line-block">
<div class="line">Direction to apply all relative offsets to</div>
<div class="line">0   Positive</div>
<div class="line">1   Negative</div>
<div class="line">2   Either</div>
</div>
</p></td>
</tr>
<tr class="row-odd"><td><p>ACTIVE</p></td>
<td><p>bit_out</p></td>
<td><p>Active output is high while block is in operation</p></td>
</tr>
<tr class="row-even"><td><p>OUT</p></td>
<td><p>bit_out</p></td>
<td><p>Output pulse train</p></td>
</tr>
<tr class="row-odd"><td><p>HEALTH</p></td>
<td><p>read enum</p></td>
<td><p><div class="line-block">
<div class="line">Error details if anything goes wrong</div>
<div class="line">0   OK</div>
<div class="line">1   Position jumped by more than STEP</div>
<div class="line">2   Can’t guess DIR when RELATIVE and PRE_START=0 and START=0</div>
</div>
</p></td>
</tr>
<tr class="row-even"><td><p>PRODUCED</p></td>
<td><p>read</p></td>
<td><p>The number of pulses produced</p></td>
</tr>
<tr class="row-odd"><td><p>STATE</p></td>
<td><p>read enum</p></td>
<td><p><div class="line-block">
<div class="line">The internal statemachine state</div>
<div class="line">0   WAIT_ENABLE</div>
<div class="line">1   WAIT_DIR</div>
<div class="line">2   WAIT_PRE_START</div>
<div class="line">3   WAIT_RISING</div>
<div class="line">4   WAIT_FALLING</div>
</div>
</p></td>
</tr>
</tbody>
</table>
</section>
<section id="position-compare-is-directional">
<h2>Position compare is directional<a class="headerlink" href="#position-compare-is-directional" title="Link to this heading">#</a></h2>
<p>A typical example would setup the parameters, enable the block, then start
moving a motor to trigger a series of pulses:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/262ea0487bf4516542777f578a2bf8e5/pcomp_doc-1.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/af1a9d1ba08eac2abf93c1787b7c08cb/pcomp_doc-1.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/227469bf2bd9c3335108d2773002e36d/pcomp_doc-1.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/2e7980bbfaf57b809382f8f3b788a7f0/pcomp_doc-1.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-1.png" class="plot-directive" src="../_images/pcomp_doc-1.png" />
</figure>
<p>But if we get the direction wrong, we won’t get the first pulse until we cross
START in the correct direction:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/17022917715382318fb353cc579d7869/pcomp_doc-2.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3ab19d963dcebef692bbee6a9a1f77a2/pcomp_doc-2.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/1fd3a7816ec4c8c55451c30439248752/pcomp_doc-2.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/b002ccc90fe6f05e93e10b58ce9ab8f6/pcomp_doc-2.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-2.png" class="plot-directive" src="../_images/pcomp_doc-2.png" />
</figure>
<p>Moving in a negative direction works in a similar way. Note that WIDTH and
PULSE still have positive values:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/dcbac6d30f542bd6bb206f39013b6983/pcomp_doc-3.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/8f603a60df222acb837fca582329b621/pcomp_doc-3.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/cf04e1b4ca927f4baa5cc2a858dd132c/pcomp_doc-3.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/eb0690673ce034a6805725b60cbc2f40/pcomp_doc-3.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-3.png" class="plot-directive" src="../_images/pcomp_doc-3.png" />
</figure>
</section>
<section id="internal-statemachine">
<h2>Internal statemachine<a class="headerlink" href="#internal-statemachine" title="Link to this heading">#</a></h2>
<p>The Block has an internal statemachine that is exposed as a parameter, allowing
the user to see what the Block is currently doing:</p>
<div class="graphviz"><object data="../_images/graphviz-2215d988c4f25b10f104ffa47ff3ab0ecbec067f.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph pcomp_sm {
WAIT_ENABLE [label=&quot;State 0\nWAIT_ENABLE&quot;,]
WAIT_DIR [label=&quot;State 1\nWAIT_DIR&quot;]
WAIT_PRE_START [label=&quot;State 2\nWAIT_PRE_START&quot;]
WAIT_RISING [label=&quot;State 3\nWAIT_RISING&quot;]
WAIT_FALLING [label=&quot;State 4\nWAIT_FALLING&quot;]

WAIT_ENABLE -&gt; WAIT_DIR [label=&quot;rising ENABLE\n &amp; DIR=EITHER &quot;,fontsize=13]
WAIT_ENABLE -&gt; WAIT_PRE_START [label=&quot; rising\n ENABLE &quot;,fontsize=13]
WAIT_ENABLE -&gt; WAIT_FALLING [label=&quot;rising\nENABLE\n&amp; RELATIVE\n&amp; START=0&quot;,fontsize=13]

WAIT_DIR -&gt; WAIT_ENABLE [label=&quot; Can't guess\n DIR \n or Disabled &quot;]
[fontsize=13]
WAIT_DIR -&gt; WAIT_PRE_START [label=&quot; DIR\n calculated &quot;,fontsize=13]
WAIT_DIR -&gt; WAIT_FALLING [label=&quot; DIR calculated \n &amp; \n no PRE_START&quot;]
[fontsize=13]

WAIT_PRE_START -&gt; WAIT_ENABLE [label=&quot; Disabled &quot;][fontsize=13]
WAIT_PRE_START -&gt; WAIT_RISING [label=&quot; &lt; PRE_START &gt; &quot;][fontsize=13]

WAIT_RISING -&gt; WAIT_ENABLE [label=&quot;jump &gt;\nWIDTH + STEP\n or Disabled &quot;]
[fontsize=13]
WAIT_RISING -&gt; WAIT_FALLING [label=&quot; &gt;= pulse &quot;,fontsize=13]

WAIT_FALLING -&gt; WAIT_ENABLE
[label=&quot; jump &gt; \nWIDTH + STEP\n or Finished \nor Disabled&quot;,fontsize=13]
WAIT_FALLING -&gt; WAIT_RISING [label=&quot; &gt;= pulse \n + WIDTH &quot;]
[fontsize=13]
}</p></object></div>
</section>
<section id="not-generating-a-pulse-more-than-once">
<h2>Not generating a pulse more than once<a class="headerlink" href="#not-generating-a-pulse-more-than-once" title="Link to this heading">#</a></h2>
<p>A key part of position compare is not generating a pulse at a position more
than once. This is to deal with noisy encoders:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/703da76c57d9181421e7b8f7a314d427/pcomp_doc-4.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/0b9ea425697acc6109629ec1ec0a2875/pcomp_doc-4.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/aff9e5b380c4fd0fb00a72bb9ec629b6/pcomp_doc-4.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/c3fa8ea9d957409a0ada71a19e561170/pcomp_doc-4.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-4.png" class="plot-directive" src="../_images/pcomp_doc-4.png" />
</figure>
<p>This means that care is needed if using direction sensing or relying on the
directionality of the encoder when passing the start position. For example,
if we approach START from the negative direction while doing a positive
position compare, then jitter back over the start position, we will generate
start at the wrong place. If you look carefully at the statemachine you will
see that the Block crossed into WAIT_START when INP &lt; 4 (START), which is too
soon for this amount of jitter:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/58c136fc5b87c573bd690d268cf05bfa/pcomp_doc-5.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/af89cbb449c22fac35a9b983d4b62cf7/pcomp_doc-5.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/69c026b1465bfbbe03a5db076d967e4e/pcomp_doc-5.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/dac8719796686718576ea92ffe0c8f66/pcomp_doc-5.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-5.png" class="plot-directive" src="../_images/pcomp_doc-5.png" />
</figure>
<p>We can fix this by adding to the PRE_START deadband which the encoder has to
cross in order to advance to the WAIT_START state. Now INP &lt; 2 (START-PRE_START)
is used for the condition of crossing into WAIT_START:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/479debb4d802481895e2274d48fa400a/pcomp_doc-6.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/977ca6be42f0cbef0903ac59bfac8064/pcomp_doc-6.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3a774f333f39c549c45fff320819660b/pcomp_doc-6.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/792810ff2270e7571f3a6406aa0a694e/pcomp_doc-6.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-6.png" class="plot-directive" src="../_images/pcomp_doc-6.png" />
</figure>
</section>
<section id="guessing-the-direction">
<h2>Guessing the direction<a class="headerlink" href="#guessing-the-direction" title="Link to this heading">#</a></h2>
<p>We can also ask to the Block to calculate direction for us:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/905ea519b7158eaf1d5cab710618dde6/pcomp_doc-7.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/9da3a6793185954d8097cc453ef489c7/pcomp_doc-7.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/e85602f615679472b52c6ad773213e6d/pcomp_doc-7.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/c031e6879c71b202e47aca8a8e4ed62f/pcomp_doc-7.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-7.png" class="plot-directive" src="../_images/pcomp_doc-7.png" />
</figure>
<p>This is a one time calculation of direction at the start of operation, once
the encoder has been moved enough to guess the direction then it is fixed until
the Block has finished producing pulses:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/b0e8f4a502ca86ba62738a77e77b7c1d/pcomp_doc-8.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/cddf5b587d70647bc39bf6f9ddca804a/pcomp_doc-8.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/ea736163682872330591db3feeb3ca89/pcomp_doc-8.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/1f0bb5e9434211bcfb6e9a49606c651d/pcomp_doc-8.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-8.png" class="plot-directive" src="../_images/pcomp_doc-8.png" />
</figure>
</section>
<section id="interrupting-a-scan">
<h2>Interrupting a scan<a class="headerlink" href="#interrupting-a-scan" title="Link to this heading">#</a></h2>
<p>When the ENABLE input is set low the output will cease. This will happen even if
the ENABLE is set low when there are still cycles of the output pulse to
generate, or if the ENABLE = 0 is set at the same time as a position match.</p>
<p>(<a class="reference download internal" download="" href="../_downloads/20ec29d0199a5f6678942e521f05518a/pcomp_doc-9.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/1546332af271ff35c6d54153c5e8112f/pcomp_doc-9.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/aeb3a7b265e8429652e2a252c3b9c5a6/pcomp_doc-9.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/15dc63627378c88e363a0272ece2dac3/pcomp_doc-9.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-9.png" class="plot-directive" src="../_images/pcomp_doc-9.png" />
</figure>
<p>(<a class="reference download internal" download="" href="../_downloads/4dfd847dacd6a8e60550fe23b0ae3788/pcomp_doc-10.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/94df6ac63ffbee23ff1496e10f27e853/pcomp_doc-10.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/101b6d6d5229ec3427832489bd5dc57b/pcomp_doc-10.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/d86929d6a882e09410ff4a4791b73dc5/pcomp_doc-10.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-10.png" class="plot-directive" src="../_images/pcomp_doc-10.png" />
</figure>
</section>
<section id="position-compare-on-absolute-values">
<h2>Position compare on absolute values<a class="headerlink" href="#position-compare-on-absolute-values" title="Link to this heading">#</a></h2>
<p>Doing position compare on an absolute value adds additional challenges, as
we are not guaranteed to see every transition. It works in much the same
way as the previous examples, but we trigger on greater than or equal rather
than just greater than:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/3bec66b48809e72e2764f64c36fd5a0f/pcomp_doc-11.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/6f966ec6947a1df689387d3eac88ce34/pcomp_doc-11.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/4d1faa87a2f65e29f835c941533eb625/pcomp_doc-11.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/dc7e2eb4e71a3d8aaeb42bf55fb48cf2/pcomp_doc-11.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-11.png" class="plot-directive" src="../_images/pcomp_doc-11.png" />
</figure>
<p>But what should the Block do if the output is 0 and the position jumps by
enough to trigger a transition to 1 and then back to 0? We handle this by
setting HEALTH=”Error: Position jumped by more than STEP” and aborting
the compare:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/75bea8eb85b9af6efa7167cff0e7eadc/pcomp_doc-12.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3754232c55fbcb27fd409affaf8046da/pcomp_doc-12.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/59a4278234929b38a0ff5166a5fbf8eb/pcomp_doc-12.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/da2b6e01a5d55dab6f0f9f5bf6465a7f/pcomp_doc-12.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-12.png" class="plot-directive" src="../_images/pcomp_doc-12.png" />
</figure>
<p>Likewise if the output is 1 and the position causes us to need to produce a 0
then 1:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/df68b09d7f61a13de276b85d0390db45/pcomp_doc-13.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/e5f1a40213c28c7232c48effe8f42346/pcomp_doc-13.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/9968e27c96c938bf091b1ec27fce0cc1/pcomp_doc-13.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/de165de915865cf12fe2f9d8d5168c88/pcomp_doc-13.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-13.png" class="plot-directive" src="../_images/pcomp_doc-13.png" />
</figure>
<p>And if we skipped a larger number of points we get the same error:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/b60811b67ac23745a2bd0ed1efefc736/pcomp_doc-14.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/13a63a644f41f34dc41a63407480155f/pcomp_doc-14.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/c15c4241c6641b3d3b9c204635eb7471/pcomp_doc-14.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3adc41f78853fb8811a005f02053d9be/pcomp_doc-14.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-14.png" class="plot-directive" src="../_images/pcomp_doc-14.png" />
</figure>
</section>
<section id="relative-position-compare">
<h2>Relative position compare<a class="headerlink" href="#relative-position-compare" title="Link to this heading">#</a></h2>
<p>We may want to nest position compare blocks, or respond to some external event.
In which case, we expose the option to a position compare relative to the
latched position at the start:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/a811a1983a70348db52eb024d85da347/pcomp_doc-15.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/7c7c13568a3c04bb115626c4bc0ca069/pcomp_doc-15.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/151cbe9a6e48db0a8cc446b843331b4e/pcomp_doc-15.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/9385de0cf440df35d086f3467433e9a6/pcomp_doc-15.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-15.png" class="plot-directive" src="../_images/pcomp_doc-15.png" />
</figure>
<p>If we want it to start immediately on ENABLE then we set START and PRE_START=0:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/160999e9c3eea957d066fc1a94e2d0c6/pcomp_doc-16.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/43587656bfca1122fcd6a873a96bc3cd/pcomp_doc-16.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/9ee2c816595c8ed36eef3d2a1c94d2a6/pcomp_doc-16.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/24d58e945269b7d55061ae328056df28/pcomp_doc-16.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-16.png" class="plot-directive" src="../_images/pcomp_doc-16.png" />
</figure>
<p>We can also guess the direction in relative mode:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/59d26526ece2e6c071a5e417c8be95fc/pcomp_doc-17.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/2d6c688ac703d2198b7bcdbd80cb06b4/pcomp_doc-17.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3054f6229619de00e03208aecea21988/pcomp_doc-17.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/6fc40caf0ff67a484ad377a310429add/pcomp_doc-17.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-17.png" class="plot-directive" src="../_images/pcomp_doc-17.png" />
</figure>
<p>This works when going negative too:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/3a60b4ce0982044636c4c63da54a9fdb/pcomp_doc-18.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/e8d8aaee9f4ddf1eddd22d60d2aea58b/pcomp_doc-18.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/6ad0f1f3e68b5ae127b44aea2ed0e0a7/pcomp_doc-18.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/32fe5fbfefb98e44e46072bd1c22fa7e/pcomp_doc-18.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-18.png" class="plot-directive" src="../_images/pcomp_doc-18.png" />
</figure>
<p>And with a PRE_START value we guess the direction to be the opposite to the
direction the motor is travelling when it exceeds PRE_START:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/9ca98ace98beff1752d33ec26b0a04d3/pcomp_doc-19.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/de7069e09826eeab11de49189ebaedd0/pcomp_doc-19.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3facbe7020bfdcec4b9f7ae31e9f583e/pcomp_doc-19.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/132d20e972a746758569849d081ae10c/pcomp_doc-19.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-19.png" class="plot-directive" src="../_images/pcomp_doc-19.png" />
</figure>
<p>We cannot guess the direction when RELATIVE mode is set with no START or
PRE_START though, the Block will error in this case:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/a4a771d9e1909d57551f7dcae73c881d/pcomp_doc-20.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/bcfe14502f6966cb2a08b3905f144e35/pcomp_doc-20.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/318322d5b6a1deacf1f7f723dff3f9a5/pcomp_doc-20.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/3a05dfed26588039bd2278061720a711/pcomp_doc-20.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-20.png" class="plot-directive" src="../_images/pcomp_doc-20.png" />
</figure>
</section>
<section id="use-as-a-schmitt-trigger">
<h2>Use as a Schmitt trigger<a class="headerlink" href="#use-as-a-schmitt-trigger" title="Link to this heading">#</a></h2>
<p>We can also make use of a special case with STEP=0 and a negative WIDTH to
create a Schmitt trigger that will always trigger at START, and turn off when
INP has dipped WIDTH below START:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/89d2856b16c6a48bff437a772a787805/pcomp_doc-21.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/f10dda58a873d5418b67dcf082946e1a/pcomp_doc-21.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/73b8b706cb843f5962f3aa9df7a12ad9/pcomp_doc-21.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/9c1ddcd930a86908e1442c63b77c6c8c/pcomp_doc-21.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-21.png" class="plot-directive" src="../_images/pcomp_doc-21.png" />
</figure>
<p>We can use this same special case with a positive width to make a similar
comparator that turns on at START and off at START+WIDTH, triggering again
when INP &lt;= START:</p>
<p>(<a class="reference download internal" download="" href="../_downloads/631da318f445bff2f65f99c78efb9800/pcomp_doc-22.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/8415147998806517cfa90622b8bf76f1/pcomp_doc-22.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/4678b7b1540f5feac2151e87fdcdac76/pcomp_doc-22.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/57903fe552fea09f70d7fc1c18ef9dbd/pcomp_doc-22.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/pcomp_doc-22.png" class="plot-directive" src="../_images/pcomp_doc-22.png" />
</figure>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fields">Fields</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#position-compare-is-directional">Position compare is directional</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-statemachine">Internal statemachine</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#not-generating-a-pulse-more-than-once">Not generating a pulse more than once</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guessing-the-direction">Guessing the direction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interrupting-a-scan">Interrupting a scan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#position-compare-on-absolute-values">Position compare on absolute values</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relative-position-compare">Relative position compare</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-as-a-schmitt-trigger">Use as a Schmitt trigger</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/PandABlocks/PandABlocks-FPGA/edit/master/docs/build/pcomp_doc.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/build/pcomp_doc.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>